<template id="import-template">
    <el-card>
        <div slot="header">
            <span>数据导入</span>
        </div>
        <el-upload
            class="upload-demo"
            :action="'/previewFile'"
            :data="uploadData"
            :on-success="handlePreviewSuccess"
            :on-error="handleUploadError"
            :auto-upload="true"
            :show-file-list="false">
            <el-button size="small" type="primary">选择文件</el-button>
            <div slot="tip" class="el-upload__tip">只能上传xlsx/xls/csv文件</div>
        </el-upload>
        <el-radio-group v-model="uploadData.dataSource">
            <el-radio label="MYSQL">MySQL</el-radio>
            <el-radio label="MONGODB">MongoDB</el-radio>
            <el-radio label="BOTH">Both</el-radio>
        </el-radio-group>

        <div v-if="previewData.length > 0" style="margin-top: 20px;">
            <h3>数据预览</h3>
            <el-table
                v-loading="previewLoading"
                :data="previewData"
                border
                style="width: 100%">
                <el-table-column
                    v-for="header in previewHeaders"
                    :key="header"
                    :prop="header"
                    :label="header">
                </el-table-column>
            </el-table>
            <el-pagination
                @current-change="handlePreviewPageChange"
                :current-page="previewPage"
                :page-size="previewPageSize"
                :total="previewTotal"
                layout="total, prev, pager, next"
                style="margin-top: 10px;">
            </el-pagination>
            
            <div style="margin-top: 20px; text-align: center;">
                <el-button type="primary" @click="confirmImport" :loading="importing">
                    确认导入
                </el-button>
                <el-button @click="cancelImport">取消</el-button>
            </div>
        </div>
    </el-card>
</template> 